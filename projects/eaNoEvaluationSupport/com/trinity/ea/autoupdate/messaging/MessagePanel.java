/*
 * MessagePanel.java
 *
 * Created on February 15, 2004, 12:03 AM
 */

package com.trinity.ea.autoupdate.messaging;

import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextPane;
import javax.swing.JButton;
import javax.swing.border.TitledBorder;
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Font;
import java.awt.Insets;
import java.awt.event.ActionEvent;
import javax.swing.JDialog;
import java.awt.event.ActionListener;
import com.trinity.ea.autoupdate.reader.EncryptedUpdateReader;
import com.trinity.ea.rules.reader.EncryptedRuleReader;

/**
 *
 * @author  aaronsc Trinity Software
 * Copyright ï¿½2004 Trinity Software. All rights reserved.
 */
public class MessagePanel extends javax.swing.JPanel {
    
    /** Creates new form MessagePanel */
    public MessagePanel() {
        initComponents();
    }
    
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    private void initComponents() {//GEN-BEGIN:initComponents

        MessageContentPanel = new javax.swing.JPanel();
        TextPaneScrollPanel = new javax.swing.JScrollPane();
        MessageContentTextPane = new javax.swing.JTextPane();
        MessageButtonPanel = new javax.swing.JPanel();
        ButtonPanel = new javax.swing.JPanel();
        OKMessageButton = new javax.swing.JButton();
        SkipMessageButton = new javax.swing.JButton();

        setLayout(new java.awt.BorderLayout());
try
{
	  	if(EncryptedUpdateReader.get("msgbrdrtext")!=null)
		{
        		setBorder(new javax.swing.border.TitledBorder(null, EncryptedUpdateReader.get("msgbrdrtext"), javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Arial", 1, 14), new java.awt.Color(0, 0, 0)));
		}
		else
		{
        		setBorder(new javax.swing.border.TitledBorder(null, "EvaluateAnywhere", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Arial", 1, 14), new java.awt.Color(0, 0, 0)));
		}
 }
catch(Exception e)
{
	e.printStackTrace();
}  
  MessageContentPanel.setLayout(new java.awt.BorderLayout());

        TextPaneScrollPanel.setBorder(null);
        MessageContentTextPane.setBackground(new java.awt.Color(204, 204, 204));
        MessageContentTextPane.setEditable(false);
	if(EncryptedUpdateReader.get("msgtext")!=null)
	{
        MessageContentTextPane.setText(EncryptedUpdateReader.get("msgtext"));
	}
	else
	{
        MessageContentTextPane.setText("Software updates were downloaded, and are ready to install. Click the OK button and automatically upgrade to the newest version of your software. Click the Skip button if you do not want to upgrade this program with the newest, most stable version available at this time.");
	}
        MessageContentTextPane.setMargin(new java.awt.Insets(10, 10, 10, 10));
        TextPaneScrollPanel.setViewportView(MessageContentTextPane);

        MessageContentPanel.add(TextPaneScrollPanel, java.awt.BorderLayout.CENTER);

        add(MessageContentPanel, java.awt.BorderLayout.CENTER);

        MessageButtonPanel.setLayout(new java.awt.BorderLayout());

        OKMessageButton.setFont(new java.awt.Font("Arial", 0, 12));
	if(EncryptedUpdateReader.get("msgokbtn")!=null)
	{
        OKMessageButton.setText(EncryptedUpdateReader.get("msgokbtn"));
	}
	else
	{	
        OKMessageButton.setText("OK");
	}
        OKMessageButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                OKMessageButtonActionPerformed(evt);
            }
        });

        ButtonPanel.add(OKMessageButton);

        SkipMessageButton.setFont(new java.awt.Font("Arial", 0, 12));
	if(EncryptedUpdateReader.get("msgskipbtn")!=null)
	{
        SkipMessageButton.setText(EncryptedUpdateReader.get("msgskipbtn"));
	}
	else
	{
        SkipMessageButton.setText("Skip");
	}
        SkipMessageButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                SkipMessageButtonActionPerformed(evt);
            }
        });

        ButtonPanel.add(SkipMessageButton);

        MessageButtonPanel.add(ButtonPanel, java.awt.BorderLayout.SOUTH);

        add(MessageButtonPanel, java.awt.BorderLayout.SOUTH);

    }//GEN-END:initComponents

    private void SkipMessageButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_SkipMessageButtonActionPerformed
                if(EncryptedRuleReader.get("autoUpdateSkipAction")!=null)
                {
                    try
                    {
        JDialog theDialog=(JDialog)this.getTopLevelAncestor();
        theDialog.setVisible(false);
                        theDialog.dispose();
                        Class.forName(EncryptedRuleReader.get("autoUpdateSkipAction")).newInstance();
                    }
                    catch(InstantiationException e)
                    {
                        System.out.println(e);
                    }   
                    catch(IllegalAccessException e)
                    {
                        System.out.println(e);
                    }                      
                    catch(ClassNotFoundException e)
                    {
                        System.out.println(e);
                    }       
                }
                else
                {
                    //Problem in Properties File
                }
    }//GEN-LAST:event_SkipMessageButtonActionPerformed

    private void OKMessageButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_OKMessageButtonActionPerformed
                if(EncryptedRuleReader.get("autoUpdateInstallAction")!=null)
                {
                    try
                    {
        JDialog theDialog=(JDialog)this.getTopLevelAncestor();
        theDialog.setVisible(false);
                        theDialog.dispose();
                        Class.forName(EncryptedRuleReader.get("autoUpdateInstallAction")).newInstance();

                    }
                    catch(InstantiationException e)
                    {
                        System.out.println(e);
                    }   
                    catch(IllegalAccessException e)
                    {
                        System.out.println(e);
                    }                      
                    catch(ClassNotFoundException e)
                    {
                        System.out.println(e);
                    }       
                }
                else
                {
                    //Problem in Properties File
                }
    }//GEN-LAST:event_OKMessageButtonActionPerformed
    
    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JPanel ButtonPanel;
    private javax.swing.JPanel MessageButtonPanel;
    private javax.swing.JPanel MessageContentPanel;
    private javax.swing.JTextPane MessageContentTextPane;
    private javax.swing.JButton OKMessageButton;
    private javax.swing.JButton SkipMessageButton;
    private javax.swing.JScrollPane TextPaneScrollPanel;
    // End of variables declaration//GEN-END:variables
    
}
