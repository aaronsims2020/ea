/*
 * CreateGRAccount.java
 *
 * Created on November 28, 2004, 8:50 PM
 */

package com.trinity.ea.design.common.project;
import com.trinity.ea.design.optin.provider.panels.gr.GRCreateAccount;
import com.trinity.ea.design.rules.builder.DesignerRuleBuilder;
import javax.swing.*; 
import java.awt.*;

/**
 *
 * @author  aaronsc Trinity Software, LLC
 * Copyright Â©2004-2005 Trinity Software, LLC. All rights reserved.
 */
public class CreateGRAccount extends javax.swing.JDialog {
    String[] acctResult ={null,null,null};    
    
    /** Creates new form CreateGRAccount */
    public CreateGRAccount(java.awt.Frame parent, boolean modal) {
        super(parent, modal);
        initComponents();
        
 	try
	{
     		setTitle("Create GetResponse Account");
	}
	  catch(Exception e)
	  {
		e.printStackTrace();
	  }
          setSize(371,203);
          setResizable(false);
//	  setWizardPanel(NewProjectPanel);
         // Get the size of the screen
        Dimension dim = Toolkit.getDefaultToolkit().getScreenSize();
        // Determine the new location of the window
        int w = getSize().width;
        int h = getSize().height;
        int x = (dim.width-w)/2;
        int y = (dim.height-h)/2;

        // Move the window
        setLocation(x, y);       
    }
    
  /** returns null on Cancel (or unsuccessful account creation), returns Login ID string on success */  
  public static String showDialog(Frame parent) 
  {
      try
      {
        CreateGRAccount dialog = new CreateGRAccount(parent, true);
        dialog.show();

        String loginAcctID = null;
        if (dialog.ok==true) 
        {
                if(result == 0)
                {
                    loginAcctID = tfLoginID.getText();
                }
        }
        else
        {
            return null;
        }

        dialog.dispose();
        return loginAcctID;
      }
      catch(Exception e)
      {
          e.printStackTrace();
          return null;
      }
  }    
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    private void initComponents() {//GEN-BEGIN:initComponents
        DescriptionPanel = new javax.swing.JPanel();
        Filler13 = new javax.swing.JLabel();
        taDescription = new javax.swing.JTextArea();
        Filler12 = new javax.swing.JLabel();
        FirstNamePanel = new javax.swing.JPanel();
        Filler1 = new javax.swing.JLabel();
        FirstNameLabel = new javax.swing.JLabel();
        tfFirstName = new javax.swing.JTextField();
        Filler2 = new javax.swing.JLabel();
        LastNamePanel = new javax.swing.JPanel();
        Filler3 = new javax.swing.JLabel();
        LastNameLabel = new javax.swing.JLabel();
        tfLastName = new javax.swing.JTextField();
        Filler4 = new javax.swing.JLabel();
        EMailPanel = new javax.swing.JPanel();
        Filler5 = new javax.swing.JLabel();
        EmailLabel = new javax.swing.JLabel();
        EmailName = new javax.swing.JTextField();
        Filler6 = new javax.swing.JLabel();
        UIDPanel = new javax.swing.JPanel();
        Filler7 = new javax.swing.JLabel();
        FirstNameLabel3 = new javax.swing.JLabel();
        tfLoginID = new javax.swing.JTextField();
        Filler8 = new javax.swing.JLabel();
        ButtonPanel = new javax.swing.JPanel();
        Filler10 = new javax.swing.JLabel();
        OKButton = new javax.swing.JButton();
        Filler11 = new javax.swing.JLabel();
        CancelButton = new javax.swing.JButton();
        Filler9 = new javax.swing.JLabel();

        getContentPane().setLayout(new javax.swing.BoxLayout(getContentPane(), javax.swing.BoxLayout.Y_AXIS));

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        DescriptionPanel.setLayout(new javax.swing.BoxLayout(DescriptionPanel, javax.swing.BoxLayout.X_AXIS));

        DescriptionPanel.setMaximumSize(new java.awt.Dimension(2147483647, 40));
        DescriptionPanel.setMinimumSize(new java.awt.Dimension(0, 40));
        DescriptionPanel.setPreferredSize(new java.awt.Dimension(0, 40));
        Filler13.setMaximumSize(new java.awt.Dimension(18, 25));
        Filler13.setMinimumSize(new java.awt.Dimension(18, 25));
        Filler13.setPreferredSize(new java.awt.Dimension(18, 25));
        DescriptionPanel.add(Filler13);

        taDescription.setBackground(javax.swing.UIManager.getDefaults().getColor("Panel.background"));
        taDescription.setEditable(false);
        taDescription.setFont(new java.awt.Font("Arial", 0, 12));
        taDescription.setLineWrap(true);
        taDescription.setText("Please type your First Name, Last Name, E-mail Address, and a Login ID you will use for your GetResponse account.");
        taDescription.setWrapStyleWord(true);
        taDescription.setMaximumSize(new java.awt.Dimension(2147483647, 30));
        taDescription.setMinimumSize(new java.awt.Dimension(0, 30));
        taDescription.setPreferredSize(new java.awt.Dimension(0, 30));
        DescriptionPanel.add(taDescription);

        Filler12.setMaximumSize(new java.awt.Dimension(18, 25));
        Filler12.setMinimumSize(new java.awt.Dimension(18, 25));
        Filler12.setPreferredSize(new java.awt.Dimension(18, 25));
        Filler12.setRequestFocusEnabled(false);
        DescriptionPanel.add(Filler12);

        getContentPane().add(DescriptionPanel);

        FirstNamePanel.setLayout(new javax.swing.BoxLayout(FirstNamePanel, javax.swing.BoxLayout.X_AXIS));

        Filler1.setMaximumSize(new java.awt.Dimension(20, 25));
        Filler1.setMinimumSize(new java.awt.Dimension(20, 25));
        Filler1.setPreferredSize(new java.awt.Dimension(20, 25));
        FirstNamePanel.add(Filler1);

        FirstNameLabel.setFont(new java.awt.Font("Arial", 0, 12));
        FirstNameLabel.setText("First Name: ");
        FirstNameLabel.setMaximumSize(new java.awt.Dimension(128, 16));
        FirstNameLabel.setMinimumSize(new java.awt.Dimension(128, 16));
        FirstNameLabel.setPreferredSize(new java.awt.Dimension(128, 16));
        FirstNamePanel.add(FirstNameLabel);

        tfFirstName.setMaximumSize(new java.awt.Dimension(2147483647, 21));
        FirstNamePanel.add(tfFirstName);

        Filler2.setMaximumSize(new java.awt.Dimension(20, 10));
        Filler2.setMinimumSize(new java.awt.Dimension(20, 10));
        Filler2.setPreferredSize(new java.awt.Dimension(20, 10));
        FirstNamePanel.add(Filler2);

        getContentPane().add(FirstNamePanel);

        LastNamePanel.setLayout(new javax.swing.BoxLayout(LastNamePanel, javax.swing.BoxLayout.X_AXIS));

        Filler3.setMaximumSize(new java.awt.Dimension(20, 25));
        Filler3.setMinimumSize(new java.awt.Dimension(20, 25));
        Filler3.setPreferredSize(new java.awt.Dimension(20, 25));
        LastNamePanel.add(Filler3);

        LastNameLabel.setFont(new java.awt.Font("Arial", 0, 12));
        LastNameLabel.setText("Last Name: ");
        LastNameLabel.setMaximumSize(new java.awt.Dimension(128, 16));
        LastNameLabel.setMinimumSize(new java.awt.Dimension(128, 16));
        LastNameLabel.setPreferredSize(new java.awt.Dimension(128, 16));
        LastNamePanel.add(LastNameLabel);

        tfLastName.setMaximumSize(new java.awt.Dimension(2147483647, 21));
        LastNamePanel.add(tfLastName);

        Filler4.setMaximumSize(new java.awt.Dimension(20, 10));
        Filler4.setMinimumSize(new java.awt.Dimension(20, 10));
        Filler4.setPreferredSize(new java.awt.Dimension(20, 10));
        LastNamePanel.add(Filler4);

        getContentPane().add(LastNamePanel);

        EMailPanel.setLayout(new javax.swing.BoxLayout(EMailPanel, javax.swing.BoxLayout.X_AXIS));

        Filler5.setMaximumSize(new java.awt.Dimension(20, 25));
        Filler5.setMinimumSize(new java.awt.Dimension(20, 25));
        Filler5.setPreferredSize(new java.awt.Dimension(20, 25));
        EMailPanel.add(Filler5);

        EmailLabel.setFont(new java.awt.Font("Arial", 0, 12));
        EmailLabel.setText("E-mail Address:");
        EmailLabel.setMaximumSize(new java.awt.Dimension(128, 16));
        EmailLabel.setMinimumSize(new java.awt.Dimension(128, 16));
        EmailLabel.setPreferredSize(new java.awt.Dimension(128, 16));
        EMailPanel.add(EmailLabel);

        EmailName.setMaximumSize(new java.awt.Dimension(2147483647, 21));
        EMailPanel.add(EmailName);

        Filler6.setMaximumSize(new java.awt.Dimension(20, 10));
        Filler6.setMinimumSize(new java.awt.Dimension(20, 10));
        Filler6.setPreferredSize(new java.awt.Dimension(20, 10));
        EMailPanel.add(Filler6);

        getContentPane().add(EMailPanel);

        UIDPanel.setLayout(new javax.swing.BoxLayout(UIDPanel, javax.swing.BoxLayout.X_AXIS));

        Filler7.setMaximumSize(new java.awt.Dimension(20, 25));
        Filler7.setMinimumSize(new java.awt.Dimension(20, 25));
        Filler7.setPreferredSize(new java.awt.Dimension(20, 25));
        UIDPanel.add(Filler7);

        FirstNameLabel3.setFont(new java.awt.Font("Arial", 0, 12));
        FirstNameLabel3.setText("New Account Login ID: ");
        FirstNameLabel3.setMaximumSize(new java.awt.Dimension(128, 16));
        FirstNameLabel3.setMinimumSize(new java.awt.Dimension(128, 16));
        FirstNameLabel3.setPreferredSize(new java.awt.Dimension(128, 16));
        UIDPanel.add(FirstNameLabel3);

        tfLoginID.setMaximumSize(new java.awt.Dimension(2147483647, 21));
        UIDPanel.add(tfLoginID);

        Filler8.setMaximumSize(new java.awt.Dimension(20, 10));
        Filler8.setMinimumSize(new java.awt.Dimension(20, 10));
        Filler8.setPreferredSize(new java.awt.Dimension(20, 10));
        UIDPanel.add(Filler8);

        getContentPane().add(UIDPanel);

        ButtonPanel.setLayout(new javax.swing.BoxLayout(ButtonPanel, javax.swing.BoxLayout.X_AXIS));

        Filler10.setMaximumSize(new java.awt.Dimension(400, 40));
        Filler10.setMinimumSize(new java.awt.Dimension(100, 40));
        Filler10.setPreferredSize(new java.awt.Dimension(200, 40));
        ButtonPanel.add(Filler10);

        OKButton.setFont(new java.awt.Font("Arial", 0, 12));
        OKButton.setMnemonic('O');
        OKButton.setText("OK");
        OKButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                OKButtonActionPerformed(evt);
            }
        });

        ButtonPanel.add(OKButton);

        Filler11.setMaximumSize(new java.awt.Dimension(5, 10));
        Filler11.setMinimumSize(new java.awt.Dimension(5, 10));
        Filler11.setPreferredSize(new java.awt.Dimension(5, 10));
        ButtonPanel.add(Filler11);

        CancelButton.setFont(new java.awt.Font("Arial", 0, 12));
        CancelButton.setMnemonic('C');
        CancelButton.setText("Cancel");
        CancelButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                CancelButtonActionPerformed(evt);
            }
        });

        ButtonPanel.add(CancelButton);

        Filler9.setMaximumSize(new java.awt.Dimension(20, 10));
        Filler9.setMinimumSize(new java.awt.Dimension(20, 10));
        Filler9.setPreferredSize(new java.awt.Dimension(20, 10));
        ButtonPanel.add(Filler9);

        getContentPane().add(ButtonPanel);

        pack();
    }//GEN-END:initComponents

    private void CancelButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_CancelButtonActionPerformed
        ok = false;
        setVisible(false);
    }//GEN-LAST:event_CancelButtonActionPerformed
    private static boolean ok = false;
    private static int result = -1;
    private void OKButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_OKButtonActionPerformed
        try
        {
            ok = true;
            if(validateData()==true)
            {
                GRCreateAccount newAcct = new GRCreateAccount();
                if(DesignerRuleBuilder.get("getRespNewUserURL")!=null)
                {
                    if(DesignerRuleBuilder.get("getRespNewUserURL").equalsIgnoreCase("")==false)
                    {                    
                        acctResult = newAcct.createAccount(DesignerRuleBuilder.get("getRespNewUserURL"), tfLoginID.getText(), tfFirstName.getText() + " " + tfLastName.getText(), EmailName.getText());
                        //JOptionPane.showMessageDialog(null,"Result: " + acctResult[0] + ", " + acctResult[1] + ", " + acctResult[2]);                        
                        if(acctResult[0].equalsIgnoreCase("0")==true)
                        {
                             result = 0;
                             JOptionPane.showMessageDialog(null,"GetResponse Account created successfully.");                        
                             setVisible(false);
                        }
                        else if(acctResult[0].equalsIgnoreCase("1")==true)
                        {
                             result = 1;
                             JOptionPane.showMessageDialog(null,"The Login ID given is already used. Please try a different Login ID.");                        
                             setVisible(true);
                        }                       
                        else if(acctResult[0].equalsIgnoreCase("2")==true)
                        {
                             result = 2;
                             JOptionPane.showMessageDialog(null,"Invalid E-mail address, please enter a valid E-mail address.");                        
                             setVisible(true);
                        }     
                        else if(acctResult[0].equalsIgnoreCase("3")==true)
                        {
                             result = 3;
                             JOptionPane.showMessageDialog(null,"The login id contains characters not allowed. Please use only letters and numbers (Base 64).");                        
                             setVisible(true);
                        }    
				else
				{
                        	result = 6;
                        	JOptionPane.showMessageDialog(null,"The Create Account Server is not available, please visit http://www.getresponse.com to create your account.");                        
                        	setVisible(false);
				}                        
                    }
                    else
                    {
                        result = 6;
                        JOptionPane.showMessageDialog(null,"The Create Account Server is not available, please visit http://www.getresponse.com to create your account.");                        
                        setVisible(false);
                    }
                }
                else
                {
                    result = 6;
                    JOptionPane.showMessageDialog(null,"The Create Account Server is not available, please visit http://www.getresponse.com to create your account.");                        
                    setVisible(false);
                }
        
            }
        }
        catch(Exception e)
        {
            result = 5;
            JOptionPane.showMessageDialog(null,"The Create Account Server is not available, please visit http://www.getresponse.com to create your account.");                        
            setVisible(false);
        }
        
    }//GEN-LAST:event_OKButtonActionPerformed
  
    private boolean validateData()
    {
        try
        {
            if(tfFirstName.getText().equalsIgnoreCase("")==true)
            {
                JOptionPane.showMessageDialog(null,"Please Enter Your First Name.");
                //tfName.grabFocus();
                return false;                
            }
        }
        catch(NullPointerException e)
        {
            JOptionPane.showMessageDialog(null,"Please Enter Your First Name.");
            //tfName.grabFocus();
            return false;            
        }
        try
        {
            if(tfLastName.getText().equalsIgnoreCase("")==true)
            {
                JOptionPane.showMessageDialog(null,"Please Enter Your Last Name.");
                //tfName.grabFocus();
                return false;                
            }
        }
        catch(NullPointerException e)
        {
            JOptionPane.showMessageDialog(null,"Please Enter Your Last Name.");
            //tfName.grabFocus();
            return false;            
        }     
        
        try
        {
            if(EmailName.getText().indexOf("@") == -1)
            {
                //System.out.println("@ missing, EMail address is: " + strEMail);
                JOptionPane.showMessageDialog(null,"Please Enter a Valid Email Address.");
                //tfEMail.grabFocus();
                return false;               
            }
            else if(EmailName.getText().indexOf(".") == -1)
            {
                 //System.out.println(". missing");               
                JOptionPane.showMessageDialog(null,"Please Enter a Valid Email Address.");
                //tfEMail.grabFocus();
                return false;               
            }
        }
        catch(NullPointerException e)
        {
            //System.out.println("Exception thrown.");
            JOptionPane.showMessageDialog(null,"Please Enter Your Email Address.");
            //tfEMail.grabFocus();
            return false;           
        }
        try
        {

            if(tfLoginID.getText().equalsIgnoreCase("")==true)
            {
                JOptionPane.showMessageDialog(null,"Please Enter your new Login ID.");
                //tfName.grabFocus();
                return false;                
            }  
        }
        catch(NullPointerException e)
        {
            JOptionPane.showMessageDialog(null,"Please Enter your new Login ID.");
            //tfName.grabFocus();
            return false;            
        }        
        return true;
    }      
    
    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JPanel ButtonPanel;
    private javax.swing.JButton CancelButton;
    private javax.swing.JPanel DescriptionPanel;
    private javax.swing.JPanel EMailPanel;
    private javax.swing.JLabel EmailLabel;
    private javax.swing.JTextField EmailName;
    private javax.swing.JLabel Filler1;
    private javax.swing.JLabel Filler10;
    private javax.swing.JLabel Filler11;
    private javax.swing.JLabel Filler12;
    private javax.swing.JLabel Filler13;
    private javax.swing.JLabel Filler2;
    private javax.swing.JLabel Filler3;
    private javax.swing.JLabel Filler4;
    private javax.swing.JLabel Filler5;
    private javax.swing.JLabel Filler6;
    private javax.swing.JLabel Filler7;
    private javax.swing.JLabel Filler8;
    private javax.swing.JLabel Filler9;
    private javax.swing.JLabel FirstNameLabel;
    private javax.swing.JLabel FirstNameLabel3;
    private javax.swing.JPanel FirstNamePanel;
    private javax.swing.JLabel LastNameLabel;
    private javax.swing.JPanel LastNamePanel;
    private javax.swing.JButton OKButton;
    private javax.swing.JPanel UIDPanel;
    private javax.swing.JTextArea taDescription;
    private javax.swing.JTextField tfFirstName;
    private javax.swing.JTextField tfLastName;
    private static javax.swing.JTextField tfLoginID;
    // End of variables declaration//GEN-END:variables
    
}
